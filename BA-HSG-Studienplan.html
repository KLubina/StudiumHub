<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BA BWL Studienplan HSG</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #fff;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 24px;
        }

        h2 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: normal;
        }

        .container {
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
        }

        .studienplan {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .farben-legende {
            width: 280px;
            margin-left: 20px;
            margin-top: 415px; /* Positioniere die Legende im unteren Bereich */
        }

        .jahr {
            display: flex;
            flex-direction: column;
            margin-bottom: 30px;
        }

        .jahr-titel {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            margin-left: 10px;
        }

        .bereich-titel {
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
            margin-left: 10px;
        }

        .module-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            min-height: auto;
            margin-bottom: 15px;
        }

        /* Module mit größeren ECTS-Punkten etwas hervorheben */
        .modul {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            color: white;
            box-sizing: border-box;
            border: none;
            overflow: hidden;
            padding: 6px 4px;
            margin: 4px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s ease, box-shadow 0.1s ease;
        }
        
        /* Hervorhebung für größere Module */
        .modul[style*="height: 100px"], 
        .modul[style*="height: 200px"] {
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }
        
        /* Hover-Effekt für alle Module */
        .modul:hover {
            transform: scale(1.02);
            z-index: 100;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .modul-titel {
            font-weight: bold;
            margin: 2px 0;
            font-size: 14px;
            line-height: a1.2;
            width: 100%;
            text-align: center;
            word-break: break-word;
            padding: 0 4px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            max-height: 70%;
        }

        .modul-kp {
            font-size: 16px;
            margin: 4px 0;
            width: 100%;
            text-align: center;
            font-weight: bold;
        }

        /* Verbesserte Farbkontraste für bessere Lesbarkeit */
        .kernfach {
            background-color: #0066b2; /* Dunkleres Blau für BWL/Management Kernfächer */
            color: white;
        }

        .methoden {
            background-color: #c4153a; /* Dunkleres Rot für Methoden */
            color: white;
        }

        .grundlagen {
            background-color: #5ca800; /* Dunkleres Grün für Grundlagenfächer */
            color: white;
        }

        .kontext {
            background-color: #5a1b6d; /* Dunkleres Lila für Kontextstudium */
            color: white;
        }

        .bachelor {
            background-color: #001f4d; /* Noch dunkleres Blau für Bachelor-Arbeit */
            color: white;
        }

        /* Legende */
        .legende-titel {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .legende-item {
            margin-bottom: 5px;
            padding: 10px;
            color: white;
            text-align: center;
        }
    </style>
</head>

<body>
    <h1>BA BWL Studium an der HSG</h1>
    <h2>mind. 180 ECTS insgesamt</h2>

    <div class="container">
        <div class="studienplan" id="studienplan">
            <!-- JavaScript wird hier die Jahre und Module einfügen -->
        </div>

        <!-- Farben-Legende -->
        <div class="farben-legende">
            <div class="legende-titel">Farben-Legende</div>
            <div id="legende">
                <!-- JavaScript wird hier die Legende einfügen -->
            </div>
        </div>
    </div>

    <script>
        // Definition der Moduldaten für das BWL Studium
        const daten = [
            // 1. Semester (Assessment Jahr)
            { jahr: 1, semester: 1, name: "Betriebswirtschaftslehre (Einführung in die Managementlehre)", kp: 5.50, kategorie: "kernfach" },
            { jahr: 1, semester: 1, name: "Mathematik A", kp: 3.50, kategorie: "methoden" },
            { jahr: 1, semester: 1, name: "Einführung ins Privatrecht", kp: 5.50, kategorie: "grundlagen" },
            { jahr: 1, semester: 1, name: "VWL A: Mikroökonomik I", kp: 5.50, kategorie: "grundlagen" },
            { jahr: 1, semester: 1, name: "Einführung in das wissenschaftliche Schreiben", kp: 3.00, kategorie: "kontext" },
            { jahr: 1, semester: 1, name: "Geschichte: Die Geschichte des Nationalismus in Europa seit 1750", kp: 2.00, kategorie: "kontext" },
            { jahr: 1, semester: 1, name: "Skills", kp: 5.00, kategorie: "methoden" },

            // 2. Semester (Assessment Jahr)
            { jahr: 1, semester: 2, name: "Betriebswirtschaftslehre (Wirtschaftsethik und Finanzielle Führung)", kp: 5.50, kategorie: "kernfach" },
            { jahr: 1, semester: 2, name: "Mathematik B", kp: 3.50, kategorie: "methoden" },
            { jahr: 1, semester: 2, name: "Einführung ins Bundesstaatsrecht", kp: 5.50, kategorie: "grundlagen" },
            { jahr: 1, semester: 2, name: "VWL B: Makroökonomik I", kp: 5.50, kategorie: "grundlagen" },
            { jahr: 1, semester: 2, name: "Integrationsprojekt", kp: 4.00, kategorie: "kontext" },
            { jahr: 1, semester: 2, name: "Geschichte: Geschichte des politischen Denkens vor ca. 1750", kp: 2.00, kategorie: "kontext" },
            { jahr: 1, semester: 2, name: "Skills", kp: 5.00, kategorie: "methoden" },

            // Fachstudium - Pflichtbereich (2.-3. Jahr)
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Accounting, Controlling, Auditing", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Corporate Finance (BBWL)", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Introduction to Operations Management", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Fundamentals and Methods of Computer Science for Business Studies", kp: 8.00, kategorie: "methoden" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Leadership und Human Resource Management", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Makroökonomik II: Vorlesung und Selbststudium", kp: 4.00, kategorie: "grundlagen" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Marketing", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Methoden: Empirische Sozialforschung", kp: 4.00, kategorie: "methoden" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Methoden: Statistik", kp: 4.00, kategorie: "methoden" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Mikroökonomik II", kp: 4.00, kategorie: "grundlagen" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Strategisches Management", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Business and Tax Law", kp: 8.00, kategorie: "grundlagen" },
            { jahr: 2, semester: 0, bereich: "Pflichtbereich", name: "Capstone-Projekt: Unternehmerische Informatik", kp: 8.00, kategorie: "methoden" },
            
            // Bachelor-Arbeit
            { jahr: 2, semester: 0, bereich: "Bachelor", name: "Bachelor-Arbeit", kp: 12.00, kategorie: "bachelor" },
            
            // Kontextstudium - Fokusbereich Geschichte
            { jahr: 2, semester: 0, bereich: "Kontextstudium", name: "Geschichte/History: Dark Continent - A History of Europe, 1914-present", kp: 3.00, kategorie: "kontext" },
            { jahr: 2, semester: 0, bereich: "Kontextstudium", name: "Geschichte/History: Grundzüge der Unternehmensgeschichte (19.-20. Jahrhundert)", kp: 3.00, kategorie: "kontext" },
            { jahr: 2, semester: 0, bereich: "Kontextstudium", name: "Geschichte/History: Die Geopolitik ist zurück auf dem Balkan - historische Voraussetzungen und künftige Risiken für Europa", kp: 3.00, kategorie: "kontext" },
            { jahr: 2, semester: 0, bereich: "Kontextstudium", name: "Geschichte/History: Unternehmer-Biographien - ein Schlüssel zur Wirtschaftsgeschichte", kp: 6.00, kategorie: "kontext" },
            { jahr: 2, semester: 0, bereich: "Kontextstudium", name: "Geschichte/History: Direkte Demokratie - ein politisches Erfolgsmodell? Seine Geschichte und Grenzen", kp: 3.00, kategorie: "kontext" },
            { jahr: 2, semester: 0, bereich: "Kontextstudium", name: "Geschichte/History: Pulverfass Balkan - Kleinstaatenpolitik und Grossmachtrivalität vor und während des Ersten Weltkriegs", kp: 3.00, kategorie: "kontext" },
            { jahr: 2, semester: 0, bereich: "Kontextstudium", name: "Gesellschaft/Society: Increasing Racial and Ethnic Equity in Switzerland", kp: 3.00, kategorie: "kontext" },
            
            // Pflichtwahlbereich
            { jahr: 2, semester: 0, bereich: "Pflichtwahlbereich", name: "Business-to-IT-Innovation: Was (zukünftige) Managerinnen und Manager wissen sollten", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtwahlbereich", name: "Controlling mit SAP", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtwahlbereich", name: "Machine Learning in Finance", kp: 4.00, kategorie: "methoden" },
            { jahr: 2, semester: 0, bereich: "Pflichtwahlbereich", name: "Risk Management", kp: 4.00, kategorie: "kernfach" },
            { jahr: 2, semester: 0, bereich: "Pflichtwahlbereich", name: "Business and Market Research", kp: 4.00, kategorie: "kernfach" }
        ];

        // Vereinfachte Kategorie-Liste für die Legende
        const kategorien = [
            { name: "BWL & Management Kernfächer", klasse: "kernfach" },
            { name: "Methodenfächer (Mathe, Statistik, Informatik)", klasse: "methoden" },
            { name: "Grundlagenfächer (VWL, Recht)", klasse: "grundlagen" },
            { name: "Kontextstudium", klasse: "kontext" },
            { name: "Bachelor-Arbeit", klasse: "bachelor" }
        ];

        // Funktion zum Erstellen der Legende
        function erstelleLegende() {
            const legendeElement = document.getElementById("legende");

            kategorien.forEach(kategorie => {
                const div = document.createElement("div");
                div.classList.add("legende-item");
                div.classList.add(kategorie.klasse);
                div.textContent = kategorie.name;
                legendeElement.appendChild(div);
            });
        }

                    // Hilfsfunktion für Textanpassung
        function fitText(container, selector) {
            const node = container.querySelector(selector);
            if (!node) return;

            // Startgröße festlegen
            let fs = 15; // Moderate Startgröße
            node.style.fontSize = fs + "px";

            // Box-Dimensionen erfassen
            const containerWidth = container.clientWidth - 10; // Padding berücksichtigen
            const containerHeight = 
              selector === ".modul-titel" 
                ? container.clientHeight * 0.7 - 10 // 70% der Höhe für Titel
                : container.clientHeight * 0.3 - 5; // 30% für ECTS

            // Solange verkleinern bis Text passt
            while ((node.scrollWidth > containerWidth || node.scrollHeight > containerHeight) && fs > 10) {
                fs--;
                node.style.fontSize = fs + "px";
            }

            // Für kleinere Texte zusätzliche Anpassungen
            if (fs <= 11) {
                node.style.lineHeight = "1.1";
                if (selector === ".modul-titel") {
                    node.style.margin = "1px 0";
                }
            }
        }

        // Funktion zur Erstellung eines Moduls mit streng proportionaler Größe
        function erstelleModul(modul, container) {
            const div = document.createElement("div");
            div.classList.add("modul");
            div.classList.add(modul.kategorie);
            
            // Kürze lange Modulnamen ab, um die Lesbarkeit zu verbessern
            if (modul.name.length > 60) {
                if (modul.name.includes(":")) {
                    // Wenn ein Doppelpunkt im Namen ist, nehme nur den Teil nach dem Doppelpunkt
                    modul.name = modul.name.split(":")[1].trim();
                } else {
                    // Ansonsten kürze den Namen ab
                    modul.name = modul.name.substring(0, 57) + "...";
                }
            }

            // Standardisierte Breite für Kategorien
            let breite;
            
            // Standardbreite basierend auf Kategorie und ECTS (für Proportionalität)
            // Basisbreite wird mit einem Faktor multipliziert, abhängig von den ECTS
            const basisBreite = Math.sqrt(modul.kp) * 80; // Erhöhter Faktor (vorher 65) für deutlichere Proportionen
            
            if (modul.kategorie === "kontext") {
                breite = Math.max(180, basisBreite); // Für Kontextstudium (meist längere Namen)
            } else if (modul.name.includes("Fundamentals and Methods of Computer Science") || 
                       modul.name.includes("Business-to-IT-Innovation")) {
                breite = Math.max(200, basisBreite); // Für sehr lange Titel
            } else {
                breite = Math.max(160, basisBreite); // Standardbreite für die meisten Module
            }
            
            div.style.width = `${breite}px`;
            
            // Strikt proportionale Größe basierend auf ECTS-Credits
            // Erhöhter Faktor: 25px pro ECTS-Credit für die Höhe (war vorher 18px)
            const basisHoeheProKP = 25;
            // Mindesthöhe von 45px für kleine Module, damit Text lesbar bleibt
            const hoehe = Math.max(45, modul.kp * basisHoeheProKP);
            
            div.style.height = `${hoehe}px`;

            // ECTS-Credits oben anzeigen
            const kpDiv = document.createElement("div");
            kpDiv.classList.add("modul-kp");
            kpDiv.textContent = `${modul.kp} ECTS`;
            div.appendChild(kpDiv);

            // Modultitel
            const titelDiv = document.createElement("div");
            titelDiv.classList.add("modul-titel");
            titelDiv.textContent = modul.name;
            div.appendChild(titelDiv);

            container.appendChild(div);
            
            // Für sehr kleine Module (2 ECTS) spezielle Anpassung
            if (modul.kp <= 2) {
                // ECTS-Anzeige anpassen
                kpDiv.style.fontSize = "15px";
                kpDiv.style.fontWeight = "bold";
                kpDiv.style.marginTop = "2px";
                kpDiv.style.marginBottom = "2px";
                
                // Titel für kleine Module optimieren
                titelDiv.style.fontSize = "12px";
                titelDiv.style.lineHeight = "1.1";
                titelDiv.style.marginTop = "1px";
                
                // Bei sehr langen Titeln in kleinen Modulen, kürze noch stärker
                if (modul.name.length > 25) {
                    // Bei Geschichte-Modulen, nimm nur den Teil nach "Geschichte: "
                    if (modul.name.includes("Geschichte:")) {
                        titelDiv.textContent = modul.name.split("Geschichte:")[1].trim();
                    } else {
                        titelDiv.textContent = modul.name.substring(0, 22) + "...";
                    }
                    
                    // Tooltip hinzufügen, damit der volle Titel beim Hover sichtbar ist
                    div.title = modul.name;
                }
            }
            // Textgrößenanpassung
            if (modul.kp <= 2) {
                // Für kleine Module spezielle Behandlung (oben bereits definiert)
            } else {
                // Für normale Module die Standard-Textanpassung
                setTimeout(() => {
                    fitText(div, ".modul-kp");
                    fitText(div, ".modul-titel");
                }, 0);
            }
        }

        // Funktion zur Erstellung des Studienplans
        function erstelleStudienplan() {
            const container = document.getElementById("studienplan");

            // Assessment-Jahr (1. Jahr)
            const assessmentJahr = document.createElement("div");
            assessmentJahr.classList.add("jahr");
            
            const assessmentTitel = document.createElement("div");
            assessmentTitel.classList.add("jahr-titel");
            assessmentTitel.textContent = "Assessment-Jahr (1. Jahr)";
            assessmentJahr.appendChild(assessmentTitel);
            
            // 1. Semester (oben)
            const semester1Titel = document.createElement("div");
            semester1Titel.classList.add("bereich-titel");
            semester1Titel.textContent = "1. Semester";
            assessmentJahr.appendChild(semester1Titel);
            
            const semester1Container = document.createElement("div");
            semester1Container.classList.add("module-container");
            
            // 2. Semester (unten)
            const semester2Titel = document.createElement("div");
            semester2Titel.classList.add("bereich-titel");
            semester2Titel.textContent = "2. Semester";
            
            const semester2Container = document.createElement("div");
            semester2Container.classList.add("module-container");
            
            // Module filtern und einfügen
            const semester1Module = daten.filter(m => m.jahr === 1 && m.semester === 1);
            const semester2Module = daten.filter(m => m.jahr === 1 && m.semester === 2);
            
            semester1Module.forEach(m => erstelleModul(m, semester1Container));
            semester2Module.forEach(m => erstelleModul(m, semester2Container));
            
            assessmentJahr.appendChild(semester1Container);
            assessmentJahr.appendChild(semester2Titel);
            assessmentJahr.appendChild(semester2Container);
            
            container.appendChild(assessmentJahr);
            
            // 2.-3. Jahr
            const hauptstudiumJahr = document.createElement("div");
            hauptstudiumJahr.classList.add("jahr");
            
            const hauptstudiumTitel = document.createElement("div");
            hauptstudiumTitel.classList.add("jahr-titel");
            hauptstudiumTitel.textContent = "2.-3. Jahr";
            hauptstudiumJahr.appendChild(hauptstudiumTitel);
            
            // Pflichtbereich
            const pflichtTitel = document.createElement("div");
            pflichtTitel.classList.add("bereich-titel");
            pflichtTitel.textContent = "Pflichtbereich";
            hauptstudiumJahr.appendChild(pflichtTitel);
            
            const pflichtContainer = document.createElement("div");
            pflichtContainer.classList.add("module-container");
            
            const pflichtModule = daten.filter(m => m.jahr === 2 && m.bereich === "Pflichtbereich");
            pflichtModule.forEach(m => erstelleModul(m, pflichtContainer));
            
            hauptstudiumJahr.appendChild(pflichtContainer);
            
            // Pflichtwahlbereich
            const pflichtwahlTitel = document.createElement("div");
            pflichtwahlTitel.classList.add("bereich-titel");
            pflichtwahlTitel.textContent = "Pflichtwahlbereich";
            hauptstudiumJahr.appendChild(pflichtwahlTitel);
            
            const pflichtwahlContainer = document.createElement("div");
            pflichtwahlContainer.classList.add("module-container");
            
            const pflichtwahlModule = daten.filter(m => m.bereich === "Pflichtwahlbereich");
            pflichtwahlModule.forEach(m => erstelleModul(m, pflichtwahlContainer));
            
            hauptstudiumJahr.appendChild(pflichtwahlContainer);
            
            // Kontextstudium
            const kontextTitel = document.createElement("div");
            kontextTitel.classList.add("bereich-titel");
            kontextTitel.textContent = "Kontextstudium - Fokusbereich Geschichte";
            hauptstudiumJahr.appendChild(kontextTitel);
            
            const kontextContainer = document.createElement("div");
            kontextContainer.classList.add("module-container");
            
            const kontextModule = daten.filter(m => m.bereich === "Kontextstudium");
            kontextModule.forEach(m => erstelleModul(m, kontextContainer));
            
            hauptstudiumJahr.appendChild(kontextContainer);
            
            // Bachelor-Arbeit am Ende
            const bachelorTitel = document.createElement("div");
            bachelorTitel.classList.add("bereich-titel");
            bachelorTitel.textContent = "Bachelor-Arbeit";
            hauptstudiumJahr.appendChild(bachelorTitel);
            
            const bachelorContainer = document.createElement("div");
            bachelorContainer.classList.add("module-container");
            
            const bachelorModul = daten.find(m => m.bereich === "Bachelor");
            if (bachelorModul) {
                erstelleModul(bachelorModul, bachelorContainer);
            }
            
            hauptstudiumJahr.appendChild(bachelorContainer);
            
            container.appendChild(hauptstudiumJahr);
        }

        // Initialisierung
        window.onload = function() {
            erstelleLegende();
            erstelleStudienplan();
            
            // Zweiter Durchlauf für Textanpassungen
            setTimeout(() => {
                document.querySelectorAll('.modul').forEach(modul => {
                    fitText(modul, '.modul-kp');
                    fitText(modul, '.modul-titel');
                });
            }, 100);
        };
    </script>
</body>

</html>