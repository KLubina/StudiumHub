<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSc CSE Studienplan mit Hover-Tooltips</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #fff;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 24px;
        }

        h2 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: normal;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
        }

        .studienplan {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .farben-legende {
            width: 300px;
            margin-left: 20px;
        }

        .jahr {
            display: flex;
            flex-direction: column;
            margin-bottom: 30px;
        }

        .jahr-titel {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            margin-left: 10px;
        }

        .bereich-titel {
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
            margin-left: 10px;
        }

        .module-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            min-height: auto;
            margin-bottom: 25px;
            padding: 10px;
        }

        .modul {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            text-align: center;
            color: white;
            box-sizing: border-box;
            border: none;
            overflow: hidden;
            padding: 5px;
            margin: 1px;
            position: relative;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .modul:hover {
            transform: scale(1.05);
            z-index: 100;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }

        .modul-titel {
            font-weight: bold;
            margin: 2px 0;
            font-size: 14px;
            line-height: 1.2;
            width: 100%;
            text-align: center;
            word-break: break-word;
        }

        .modul-kp {
            font-size: 14px;
            margin: 2px 0;
            width: 100%;
            text-align: center;
            font-weight: bold;
        }

        /* Tooltip Style */
        .tooltip-container {
            position: fixed;
            max-width: 500px;
            width: 350px;
            background-color: #fff;
            color: #333;
            text-align: left;
            border-radius: 6px;
            padding: 10px 15px;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            font-size: 13px;
            line-height: 1.4;
            overflow-y: auto;
            max-height: 400px;
            display: none;
            pointer-events: auto;
        }
        
        .close-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            color: #666;
        }
        
        .close-btn:hover {
            background-color: #ddd;
            color: #333;
        }

        .tooltip-container h3 {
            margin: 0 0 8px 0;
            font-size: 16px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }

        .tooltip-container h4 {
            margin: 12px 0 5px 0;
            font-size: 14px;
        }

        .tooltip-container p {
            margin: 5px 0;
            font-size: 13px;
        }

        .tooltip-container ul {
            margin: 5px 0;
            padding-left: 20px;
        }

        .tooltip-container li {
            margin-bottom: 3px;
        }

        /* Prüfungsblock Farben */
        .basis1 {
            background-color: #8064A2; /* Lila */
            color: white;
        }

        .basis2 {
            background-color: #1F77B4; /* Blau */
            color: white;
        }

        .block-g1 {
            background-color: #8DC63F; /* Grün */
            color: black;
        }

        .block-g2 {
            background-color: #E671B8; /* Pink */
            color: white;
        }

        .block-g3 {
            background-color: #4CAF50; /* Grün */
            color: white;
        }

        .block-g4 {
            background-color: #D32F2F; /* Rot */
            color: white;
        }

        /* Andere Kategorien */
        .wissenschaftliche-arbeit {
            background-color: #5D3A8E; /* Dunkel-Lila */
            color: white;
        }

        .kern {
            background-color: #9BBB59; /* Hellgrün */
            color: black;
        }

        .wahl {
            background-color: #F2B48F; /* Hellrot */
            color: black;
        }

        .vertiefung {
            background-color: #DD98DD; /* Helllila */
            color: black;
        }

        /* Legende */
        .legende-titel {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .legende-item {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 5px;
            color: white;
        }

        .legende-item-titel {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 8px;
            text-align: center;
        }

        .legende-item-inhalt {
            font-size: 12px;
            line-height: 1.4;
        }

        .legende-modul {
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <h1>BSc Computational Science and Engineering (CSE)</h1>
    <h2>mind. 180 KP insgesamt</h2>

    <div class="container">
        <div class="studienplan" id="studienplan">
            <!-- JavaScript wird hier die Jahre und Module einfügen -->
        </div>

        <!-- Farben-Legende mit Prüfungsblöcken -->
        <div class="farben-legende">
            <div class="legende-titel">Farben-Legende</div>
            <div id="legende">
                <!-- JavaScript wird hier die Legende einfügen -->
            </div>
        </div>
    </div>

    <!-- Tooltip-Container für Modulinfos -->
    <div id="tooltip" class="tooltip-container"></div>

    <script>
        // IE Edge Polyfill für Event
        if (!Event.prototype.composedPath) {
            Event.prototype.composedPath = function() {
                if (this.path) {
                    return this.path;
                } 
                let target = this.target;
                this.path = [];
                while (target.parentNode !== null) {
                    this.path.push(target);
                    target = target.parentNode;
                }
                this.path.push(document, window);
                return this.path;
            }
        }
        
        // Definition der Prüfungsblöcke
        const pruefungsbloecke = [
            {
                name: "Prüfungsblock G1",
                module: [
                    { name: "Analysis III", ng: 1 },
                    { name: "Introduction to Mathematical Optimization", ng: 1 },
                    { name: "Numerische Methoden für CSE", ng: 2 }
                ],
                cssClass: "block-g1"
            },
            {
                name: "Prüfungsblock G2",
                module: [
                    { name: "Programmiertechniken für physikalische Simulationen", ng: 1 },
                    { name: "Systems Programming and Computer Architecture", ng: 1 }
                ],
                cssClass: "block-g2"
            },
            {
                name: "Prüfungsblock G3",
                module: [
                    { name: "Numerical Methods for Partial Differential Equations", ng: 2 },
                    { name: "Stochastik", ng: 1 }
                ],
                cssClass: "block-g3"
            },
            {
                name: "Prüfungsblock G4",
                module: [
                    { name: "Fluiddynamik I", ng: 1 },
                    { name: "Molekulare Quantenmechanik", ng: 1 },
                    { name: "Physikalische Chemie III", ng: 1 },
                    { name: "Statistische Physik und Computer Simulation", ng: 1 }
                ],
                cssClass: "block-g4"
            },
            {
                name: "Basisprüfungsblock 2",
                module: [
                    { name: "Analysis I und II", ng: 3 },
                    { name: "Physik I und II", ng: 2 },
                    { name: "Komplexe Analysis", ng: 1 },
                    { name: "Datenstrukturen und Algorithmen", ng: 2 },
                    { name: "Chemie", ng: 1 }
                ],
                cssClass: "basis2"
            },
            {
                name: "Basisprüfungsblock 1",
                module: [
                    { name: "Lineare Algebra", ng: 1 },
                    { name: "Informatik", ng: 1 },
                    { name: "Diskrete Mathematik", ng: 1 }
                ],
                cssClass: "basis1"
            }
        ];

        // Definition der Moduldaten für das CSE Studium
        const daten = [
            // 1. Jahr
            { jahr: 1, semester: 1, name: "Physik I", kp: 4, pruefungsblock: "Basisprüfungsblock 2", ng: 2 },
            { jahr: 1, semester: 1, name: "Informatik", kp: 4, pruefungsblock: "Basisprüfungsblock 1", ng: 1 },
            { jahr: 1, semester: 1, name: "Lineare Algebra", kp: 5, pruefungsblock: "Basisprüfungsblock 1", ng: 1 },
            { jahr: 1, semester: 1, name: "Diskrete Mathematik", kp: 7, pruefungsblock: "Basisprüfungsblock 1", ng: 1 },
            { jahr: 1, semester: 1, name: "Analysis I", kp: 8, pruefungsblock: "Basisprüfungsblock 2", ng: 3 },

            { jahr: 1, semester: 2, name: "Physik II", kp: 4, pruefungsblock: "Basisprüfungsblock 2", ng: 2 },
            { jahr: 1, semester: 2, name: "Komplexe Analysis", kp: 4, pruefungsblock: "Basisprüfungsblock 2", ng: 1 },
            { jahr: 1, semester: 2, name: "Chemie", kp: 4, pruefungsblock: "Basisprüfungsblock 2", ng: 1 },
            { jahr: 1, semester: 2, name: "Analysis II", kp: 8, pruefungsblock: "Basisprüfungsblock 2", ng: 3 },
            { jahr: 1, semester: 2, name: "Datenstrukturen und Algorithmen", kp: 8, pruefungsblock: "Basisprüfungsblock 2", ng: 2 },

            // 2. Jahr - ohne Semesterunterscheidung
            { jahr: 2, name: "Analysis III", kp: 4, pruefungsblock: "Prüfungsblock G1", ng: 1 },
            { jahr: 2, name: "Introduction to Mathematical Optimization", kp: 5, pruefungsblock: "Prüfungsblock G1", ng: 1 },
            { jahr: 2, name: "Numerische Methoden für CSE", kp: 9, pruefungsblock: "Prüfungsblock G1", ng: 2 },
            { jahr: 2, name: "Stochastik", kp: 4, pruefungsblock: "Prüfungsblock G3", ng: 1 },
            { jahr: 2, name: "Numerical Methods for Partial Differential Equations", kp: 10, pruefungsblock: "Prüfungsblock G3", ng: 2 },
            { jahr: 2, name: "Programmiertechniken für physikalische Simulationen", kp: 5, pruefungsblock: "Prüfungsblock G2", ng: 1 },
            { jahr: 2, name: "Systems Programming and Computer Architecture", kp: 7, pruefungsblock: "Prüfungsblock G2", ng: 1 },
            { jahr: 2, name: "Wissenschaft im Kontext", kp: 6, kategorie: "wissenschaftliche-arbeit" },
            { jahr: 2, name: "Fluiddynamik I", kp: 6, pruefungsblock: "Prüfungsblock G4", ng: 1 },
            { jahr: 2, name: "Molekulare Quantenmechanik", kp: 4, pruefungsblock: "Prüfungsblock G4", ng: 1 },
            { jahr: 2, name: "Physikalische Chemie III", kp: 4, pruefungsblock: "Prüfungsblock G4", ng: 1 },
            { jahr: 2, name: "Statistische Physik und Computer Simulation", kp: 5, pruefungsblock: "Prüfungsblock G4", ng: 1 },

            // 3. Jahr - Kernfächer
            { jahr: 3, semester: 0, bereich: "Kernfächer", name: "Software Engineering", kp: 6, kategorie: "kern" },
            { jahr: 3, semester: 0, bereich: "Kernfächer", name: "Design of High Performance Computing", kp: 6, kategorie: "kern" },
            { jahr: 3, semester: 0, bereich: "Kernfächer", name: "Introduction into Machine Learning", kp: 8, kategorie: "kern" },

            // 3. Jahr - Vertiefungsgebiet
            { jahr: 3, semester: 0, bereich: "Vertiefungsgebiet", name: "Atmosphäre", kp: 3, kategorie: "vertiefung" },
            { jahr: 3, semester: 0, bereich: "Vertiefungsgebiet", name: "Weather and Climate Modeling", kp: 4, kategorie: "vertiefung" },

            // 3. Jahr - Wahlfächer
            { jahr: 3, semester: 0, bereich: "Wahlfächer", name: "Information Systems for Engineers", kp: 5, kategorie: "wahl" },
            { jahr: 3, semester: 0, bereich: "Wahlfächer", name: "Communication Networks", kp: 6, kategorie: "wahl" },

            // 3. Jahr - Abschluss
            { jahr: 3, semester: 0, bereich: "Abschluss", name: "Fallstudien", kp: 6, kategorie: "wissenschaftliche-arbeit" },
            { jahr: 3, semester: 0, bereich: "Abschluss", name: "Bachelorarbeit", kp: 14, kategorie: "wissenschaftliche-arbeit" }
        ];

        // Kategorie-Liste für weitere Legende
        const kategorien = [
            { name: "Wissenschaftliche Arbeit", klasse: "wissenschaftliche-arbeit" },
            { name: "Kernfächer", klasse: "kern", info: "3 von 4 möglichen auswählen" },
            { name: "Wahlfächer", klasse: "wahl", info: "mind. zwei Module" },
            { name: "Vertiefungsgebiet", klasse: "vertiefung", info: "2 Module auswählen (Atmosphärenphysik)" }
        ];

        // Detaillierte Modul-Beschreibungen
        const modulDetails = {
            "Analysis 1": {
                kurzbeschreibung: "• Reelle und komplexe Zahlen\n• Grenzwerte\n• Folgen\n• Reihen\n• Potenzreihen\n• stetige Abbildungen\n• Differential- und Integralrechnung einer Variablen\n• Einführung in gewöhnliche Differentialgleichungen",
                lernziel: "Einführung in die Grundlagen der Analysis",
                inhalt: ""
            },
            "Analysis I": {
                kurzbeschreibung: "• Reelle und komplexe Zahlen\n• Grenzwerte\n• Folgen\n• Reihen\n• Potenzreihen\n• stetige Abbildungen\n• Differential- und Integralrechnung einer Variablen\n• Einführung in gewöhnliche Differentialgleichungen",
                lernziel: "Einführung in die Grundlagen der Analysis",
                inhalt: ""
            },
            "Analysis 2": {
                kurzbeschreibung: "Einführung in die mehrdimensionale Differential- und Integralrechung.",
                lernziel: "Einführung in die Grundlagen der Analysis",
                inhalt: "• Differenzierbare Abbildungen\n• Maxima und Minima\n• der Satz ueber implizite Funktionen\n• mehrfache Integrale\n• Integration ueber Untermannigfaltigkeiten\n• die Saetze von Gauss und Stokes"
            },
            "Analysis II": {
                kurzbeschreibung: "Einführung in die mehrdimensionale Differential- und Integralrechung.",
                lernziel: "Einführung in die Grundlagen der Analysis",
                inhalt: "• Differenzierbare Abbildungen\n• Maxima und Minima\n• der Satz ueber implizite Funktionen\n• mehrfache Integrale\n• Integration ueber Untermannigfaltigkeiten\n• die Saetze von Gauss und Stokes"
            },
            "Analysis 3": {
                kurzbeschreibung: "In this lecture we treat problems in applied analysis. The focus lies on the solution of quasilinear first order PDEs with the method of characteristics, and on the study of three fundamental types of partial differential equations of second order: • the Laplace equation\n• the heat equation\n• the wave equation",
                lernziel: "The aim of this class is to provide students with a general overview of first and second order PDEs, and teach them how to solve some of these equations using characteristics and/or separation of variables.",
                inhalt: "1. General introduction to PDEs and their classification \n• linear\n• quasilinear\n• semilinear\n• nonlinear \n• elliptic\n• parabolic\n• hyperbolic\n2. Quasilinear first order PDEs\n• Solution with the method of characteristics\n• Conservation laws\n3. Hyperbolic PDEs\n• wave equation\n• d'Alembert formula in (1+1)-dimensions\n• method of separation of variables\n4. Parabolic PDEs\n• heat equation\n• maximum principle\n• method of separation of variables\n5. Elliptic PDEs\n• Laplace equation\n• maximum principle\n• method of separation of variables\n• variational method"
            },
            "Analysis III": {
                kurzbeschreibung: "In this lecture we treat problems in applied analysis. The focus lies on the solution of quasilinear first order PDEs with the method of characteristics, and on the study of three fundamental types of partial differential equations of second order: • the Laplace equation\n• the heat equation\n• the wave equation",
                lernziel: "The aim of this class is to provide students with a general overview of first and second order PDEs, and teach them how to solve some of these equations using characteristics and/or separation of variables.",
                inhalt: "1. General introduction to PDEs and their classification \n• linear\n• quasilinear\n• semilinear\n• nonlinear \n• elliptic\n• parabolic\n• hyperbolic\n2. Quasilinear first order PDEs\n• Solution with the method of characteristics\n• Conservation laws\n3. Hyperbolic PDEs\n• wave equation\n• d'Alembert formula in (1+1)-dimensions\n• method of separation of variables\n4. Parabolic PDEs\n• heat equation\n• maximum principle\n• method of separation of variables\n5. Elliptic PDEs\n• Laplace equation\n• maximum principle\n• method of separation of variables\n• variational method"
            },
            "Physik I": {
                kurzbeschreibung: "Einführung in die Denk- und Arbeitsweise in der Physik unter Zuhilfenahme von Demonstrationsexperimenten: \n• Mechanik von Massenpunkten und starren Körpern\n• Schwingungen und Wellen",
                lernziel: "Vermittlung der physikalischen Denk- und Arbeitsweise und Einführung in die Methoden in einer experimentellen Wissenschaft. \nDie Studenten und Tarentine soll lernen, physicalist Fragestellungen im eigenen Wissenschaftsbereich zu identifizieren, zu kommunizieren und zu lösen.",
                inhalt: "• Mechanik (Bewegung, Newtonsche Axiome, Arbeit und Energie, Impulserhaltung, Drehbewegungen, Gravitation, deformierbare Körper)\n• Schwingungen und Wellen (Schwingungen, mechanische Wellen, Akustik)"
            },
            "Physik II": {
                kurzbeschreibung: "Einführung in die Denk- und Arbeitsweise in der Physik unter Zuhilfenahme von Demonstrationsexperimenten: \n• Elektrizität und Magnetismus\n• Licht\n• Einführung in die Moderne Physik",
                lernziel: "Vermittlung der physikalischen Denk- und Arbeitsweise und Einführung in die Methoden in einer experimentellen Wissenschaft. \nDer Studenten/in soll lernen physikalische Fragestellungen im eigenen Wissenschaftsbereich zu identifizieren, zu kommunizieren und zu lösen.",
                inhalt: ""
            },
            "Komplexe Analysis": {
                kurzbeschreibung: "• Grundlagen der Komplexen Analysis in Theorie und Anwendung, insbesondere globale Eigenschaften analytischer Funktionen. \n• Einführung in die Integraltransformationen und Beschreibung einiger Anwendungen.",
                lernziel: "Erwerb von einigen grundlegenden Werkzeugen der komplexen Analysis, sowie Verständnis und Anwendung Fourier- und Laplacetransformationen.",
                inhalt: "• Beispiele analytischer Funktionen\n• Cauchyscher Integralsatz\n• Taylor- und Laurententwicklungen\n• Singularitäten analytischer Funktionen\n• Residuenkalkül\n• Fourierreihen und Fourier-Transformation\n• Laplace-Transformation"
            },
            "Chemie": {
                kurzbeschreibung: "Einführung in die Chemie mit Aspekten aus der anorganischen, organischen und physikalischen Chemie.",
                lernziel: "• Einfache Modelle der chemischen Bindung und der dreidimensionalen Struktur von Molekülen verstehen\n• Ausgewählte chemische Systeme anhand von Reaktionsgleichungen und Gleichgewichtsrechnungen beschreiben und quantitativ erfassen\n• Grundlegende Begriffe der chemischen Kinetik (z. B. Reaktionsordnung, Geschwindigkeitsgesetz und -konstante) verstehen und anwenden.",
                inhalt: "• Periodisches System der Elemente\n• chemische Bindung (LCAO-MO)\n• molekulare Struktur (VSEPR)\n• Reaktionen\n• Gleichgewicht\n• chemische Kinetik."
            },
            "Datenstrukturen und Algorithmen": {
                kurzbeschreibung: "• Der Kurs vermittelt die Grundlagen für den Entwurf und die Analyse von Algorithmen.\n• Anhand klassischer Probleme werden gängige Datenstrukturen, Algorithmen und Paradigmen für den Algorithmenentwurf diskutiert.\n• Der Kurs umfasst auch eine Einführung in die parallele und nebenläufige Programmierung und das Programmiermodell von C++ wird eingehend diskutiert.",
                lernziel: "Verständnis des Entwurfs und der Analyse grundlegender Algorithmen und Datenstrukturen. \nWissen um die Chancen, Probleme und Grenzen der parallelen und nebenläufigen Programmierung. \nVertiefter Einblick in ein modernes Programmiermodell anhand der Prorgammiersprache C++.",
                inhalt: "Datenstrukturen und Algorithmen: \n• Mathematische Tools für die Analyse von Algorithmen (asymptotisches Funktionenwachstum, Rekursionsgleichungen, Rekursionsbäume)\n• informelle Beweise für die Korrektheit von Algorithmen (Invarianten und Codetransformation)\n• Entwurfsparadigmen für die Entwicklung von Algorithmen (Induktion, Divide-and-Conquer, Sweep-Line-Methode, Backtracking und dynamische Programmierung)\n• klassische algorithmische Probleme (Suche, Auswahl und Sortierung), Datenstrukturen für verschiedene Zwecke (verkettete Listen, Hash-Tabellen, balancierte Suchbäume, Quad-Trees, Heaps, Union-Find)\n• weitere Tools für die Laufzeitanalyse (z.B. amortisierte Analyse)\n\nDie Beziehung und enge Kopplung zwischen Algorithmen und Datenstrukturen wird anhand von geometrischen Problemen (konvexe Hülle, Linienschnitte, dichteste Punktepaare) und Graphenalgorithmen (Traversierungen, topologische Sortierung, transitive Hülle, kürzeste Pfade, minimale Spannbäume, maximaler Fluss) illustriert.\n\nProgrammiermodell von C++:\n• korrekte und effiziente Speicherbehandlung\n• generische Programmierung mit Templates\n• funktionale Ansätze mit Funktoren und Lambda-Ausdrücken\n\nParallele Programmierung: \n• Konzepte der parallelen Programmierung (Amdahl/Gustavson, Task/Daten-Parallelität, Scheduling)\n• Probleme der Nebenläufigkeit (data races, bad interleavings, memory reordering)\n• Prozess-Synchronisation und Kommunikation in einem Shared-Memory-System (Mutual Exclusion, Semaphoren, Monitore, Condition-Variablen)\n• Fortschrittsbedingungen (Deadlock-Freiheit, Starvation)."
            },
            "Informatik": {
                kurzbeschreibung: "Die Vorlesung bietet eine Einführung in das Programmieren mit einem Fokus auf systematischem algorithmischem Problemlösen.\nLehrsprache ist C++. \nEs wird keine Programmiererfahrung vorausgesetzt.",
                lernziel: "Primäres Lernziel der Vorlesung ist die Befähigung zum Programmieren mit C++. Studenten beherrschen nach erfolgreichem Abschluss der Vorlesung die Mechanismen zum Erstellen eines Programms.\nSie kennen \n• die fundamentalen Kontrollstrukturen\n• Datenstrukturen \n• verstehen wie man ein algorithmisches Problem in ein Programm abbildet. \nSie haben eine Vorstellung davon, was \"hinter den Kulissen\" passiert, wenn ein Programm übersetzt und ausgeführt wird.\n\nSekundäre Lernziele der Vorlesung sind\n• das Computer-basierte, algorithmische Denken\n• Verständnis der Möglichkeiten und der Grenzen der Programmierung \n• die Vermittlung der Denkart eines Computerwissenschaftlers",
                inhalt: "Wir behandeln \n• fundamentale Datentypen\n• Ausdrücke und Anweisungen\n• (Grenzen der) Computerarithmetik\n• Kontrollanweisungen\n• Funktionen\n• Felder\n• zusammengesetze Strukturen \n• Zeiger\nIm Teil zur Objektorientierung werden Klassen, Vererbung und Polymorhpie behandelt, es werden exemplarisch einfache dynamische Datentypen eingeführt.\nDie Konzepte der Vorlesung werden jeweils durch Algorithmen und Anwendungen motiviert und illustriert."
            },
            "Diskrete Mathematik": {
                kurzbeschreibung: "Inhalt: \n• Mathematisches Denken und Beweise\n• Abstraktion\n• Mengen\n• Relationen (z.B. Aequivalenz- und Ordnungsrelationen)\n• Funktionen\n• (Un-)abzählbarkeit\n• Zahlentheorie\n• Algebra (Gruppen, Ringe, Körper, Polynome, Unteralgebren, Morphismen)\n• Logik (Aussagen- und Prädikatenlogik, Beweiskalküle).",
                lernziel: "Hauptziele der Vorlesung sind\n• die Einführung der wichtigsten Grundbegriffe der diskreten Mathematik\n• das Verständnis der Rolle von Abstraktion und von Beweisen \n• die Diskussion einiger Anwendungen, z.B. aus der Kryptographie, Codierungstheorie und Algorithmentheorie",
                inhalt: ""
            },
            "Lineare Algebra": {
                kurzbeschreibung: "Inhalt: \n• Lineare Gleichungssysteme - der Algorithmus von Gauss\n• Matrizen - LR-Zerlegung\n• Determinanten\n• Vektorräume\n• Ausgleichsrechnung - QR-Zerlegung\n• Lineare Abbildungen\n• Eigenwertproblem\n• Normalformen - Singulärwertzerlegung; numerische Aspekte",
                lernziel: "Sie können:\n• lineare Gleichungssysteme mit dem Gauss-Algorithmus lösen;\n• die Grundoperationen mit Vektoren und Matrizen anwenden und geometrisch interpretieren;\n• verschiedene Matrizenzerlegungen berechnen und passend anwenden;\n• Eigenwerte, Eigenvektoren und Determinanten von Matrizen berechnen;\n• Eigenschaften von Vektorräumen und lineraren Abbildungen verwenden;\n• lineare Ausgleichsprobleme formulieren und mit geeigneten Methoden lösen;\n• die Singularwertzerlegung verstehen und anwenden.",
                inhalt: "• Lineare Gleichungsysteme, Matrizen, Gauss-Elimination, LU- und QR-Zerlegungen\n• Lineare Räume, Fundamentalsatz der linearen Algebra - Teil I, Basiswahl und Basiswechsel\n• Lineare Abbildungen und Abbildungsmatrix bei Koordinatentransformationen\n• Norm und Skalarprodukt in linearen Räumen, Gram-Schmidt-Algorithmus, Projektoren\n• Lineare Ausgleichsrechnung\n• Determinanten\n• Eigenwerte und Eigenvektoren, Symmetrische Matrizen\n• Singulärwertzerlegung und Fundamentalsatz der linearen Algebra, Anwendungen"
            },
            "Numerical Methods for Partial Differential Equations": {
                kurzbeschreibung: "Derivation, properties, and implementation of fundamental numerical methods for a few key partial differential equations: \n• convection-diffusion\n• heat equation\n• wave equation\n• conservation laws\nImplementation in C++ based on a finite element library.",
                lernziel: "Main skills to be acquired in this course:\n• Ability to implement fundamental numerical methods for the solution of partial differential equations efficiently.\n• Ability to modify and adapt numerical algorithms guided by awareness of their mathematical foundations.\n• Ability to select and assess numerical methods in light of the predictions of theory\n• Ability to identify features of a PDE (= partial differential equation) based model that are relevant for the selection and performance of a numerical algorithm.\n• Ability to understand research publications on theoretical and practical aspects of numerical methods for partial differential equations.\n• Skills in the efficient implementation of finite element methods on unstructured meshes.\nThis course is neither a course on the mathematical foundations and numerical analysis of methods nor an course that merely teaches recipes and how to apply software packages.",
                inhalt: "• Second-order scalar elliptic boundary value problems\n• Finite-element methods (FEM)\n• FEM: Convergence and Accuracy\n• Beyond FEM: Alternative Discretizations\n• Non-linear elliptic boundary value problems\n• Second-order linear evolution problems\n• Convection-diffusion problems\n• Finite Elements for the Stokes Equation"
            },
            "Stochastik": {
                kurzbeschreibung: "Wahrscheinlichkeitsmodelle und Anwendungen, Einführung in Schätztheorie und statistische Testtheorie",
                lernziel: "Fähigkeit, die behandelten wahrscheinlichkeitstheoretischen Methoden und Modelle zu verstehen und anzuwenden. \nFähigkeit, einfache statistische Tests selbst durchzuführen und die Resultate zu interpretieren.",
                inhalt: "Der Begriff Wahrscheinlichkeitsraum und einige klassische Modelle: \n• Axiome von Kolmogorov\n• einfache Folgerungen\n• diskrete Modelle\n• Dichtefunktionen\n• Produktmodelle\n• Zusammenhang zwischen den bisher betrachteten Modellen\n• Verteilungsfunktionen\n• Transformation von Wahrscheinlichkeitsverteilungen. \n\nBedingte Wahrscheinlichkeiten: \n• Definition und Beispiele\n• Berechnung von absoluten aus bedingten Wahrscheinlichkeiten\n• Bayes'sche Regel\n• Anwendung auf Nachrichtenquellen\n• bedingte Verteilungen\n• Erwartungswert einer Zufallsvariablen\n• Varianz\n• Kovarianz und Korrelation\n• lineare Prognosen\n• Gesetz der grossen Zahlen\n• zentraler Grenzwertsatz\n\nEinführung in die Statistik:\n• Schätzung von Parametern\n• Tests"
            },
            "Wahrscheinlichkeitstheorie und Statistik": {
                kurzbeschreibung: "Wahrscheinlichkeitsmodelle und Anwendungen, Einführung in Schätztheorie und statistische Testtheorie",
                lernziel: "Fähigkeit, die behandelten wahrscheinlichkeitstheoretischen Methoden und Modelle zu verstehen und anzuwenden. \nFähigkeit, einfache statistische Tests selbst durchzuführen und die Resultate zu interpretieren.",
                inhalt: "Der Begriff Wahrscheinlichkeitsraum und einige klassische Modelle: \n• Axiome von Kolmogorov\n• einfache Folgerungen\n• diskrete Modelle\n• Dichtefunktionen\n• Produktmodelle\n• Zusammenhang zwischen den bisher betrachteten Modellen\n• Verteilungsfunktionen\n• Transformation von Wahrscheinlichkeitsverteilungen. \n\nBedingte Wahrscheinlichkeiten: \n• Definition und Beispiele\n• Berechnung von absoluten aus bedingten Wahrscheinlichkeiten\n• Bayes'sche Regel\n• Anwendung auf Nachrichtenquellen\n• bedingte Verteilungen\n• Erwartungswert einer Zufallsvariablen\n• Varianz\n• Kovarianz und Korrelation\n• lineare Prognosen\n• Gesetz der grossen Zahlen\n• zentraler Grenzwertsatz\n\nEinführung in die Statistik:\n• Schätzung von Parametern\n• Tests"
            },
            "Fluid Dynamics": {
                kurzbeschreibung: "An introduction to the physical and mathematical foundations of fluid dynamics is given. \nTopics include:\n• dimensional analysis\n• integral and differential conservation laws\n• inviscid and viscous flows\n• Navier-Stokes equations\n• boundary layers\n• turbulence\n• potential flows\n• unsteady flows\n• aerodynamic concepts\n• vorticity dynamics\n• compressible flows",
                lernziel: "Introduction to the physical and mathematical principles of fluid dynamics. \nFundamental terminology/principles and their application to simple problems. \nConcepts, phenomena and quantitative description of potential, rotational, and one-dimensional compressible flows.",
                inhalt: "• Dimensional analysis\n• integral and differential conservation laws\n• inviscid and viscous flows\n• Navier-Stokes equations\n• boundary layers, turbulence\n• potential flows\n• unsteady flows\n• aerodynamic concepts\n• vorticity dynamics\n• compressible flows"
            },
            "Fluiddynamik I": {
                kurzbeschreibung: "An introduction to the physical and mathematical foundations of fluid dynamics is given. \nTopics include:\n• dimensional analysis\n• integral and differential conservation laws\n• inviscid and viscous flows\n• Navier-Stokes equations\n• boundary layers\n• turbulence\n• potential flows\n• unsteady flows\n• aerodynamic concepts\n• vorticity dynamics\n• compressible flows",
                lernziel: "Introduction to the physical and mathematical principles of fluid dynamics. \nFundamental terminology/principles and their application to simple problems. \nConcepts, phenomena and quantitative description of potential, rotational, and one-dimensional compressible flows.",
                inhalt: "• Dimensional analysis\n• integral and differential conservation laws\n• inviscid and viscous flows\n• Navier-Stokes equations\n• boundary layers, turbulence\n• potential flows\n• unsteady flows\n• aerodynamic concepts\n• vorticity dynamics\n• compressible flows"
            },
            "Statistische Physik und Computer Simulation": {
                kurzbeschreibung: "• Prinzipien und Anwendungen der statistischen Mechanik und Gleichgewichts-Molekulardynamik\n• Monte-Carlo-Verfahren\n• stochastischen Dynamik \n• freien Energie-Rechnung\nDie Übungen verwenden ein Computersimulationsprogramm, um Ensembles zu generieren und danach Ensembledurchschnitte zu berechnen.",
                lernziel: "• Einführung in die statistische Mechanik mit Hilfe von Computersimulationen\n• Erwerben der Fertigkeit, Computersimulationen durchzuführen und die Resultate zu interpretieren.",
                inhalt: "• Prinzipien und Anwendungen der statistischen Mechanik und Gleichgewichts-Molekulardynamik\n• Monte-Carlo-Verfahren\n• stochastischen Dynamik und freien Energie-Rechnung\nDie Übungen verwenden ein Computersimulationsprogramm, um Ensembles zu generieren und danach Ensembledurchschnitte zu berechnen."
            },
            "Introduction to Mathematical Optimization": {
                kurzbeschreibung: "Introduction to basic techniques and problems in mathematical optimization, and their applications to a variety of problems in engineering.",
                lernziel: "The goal of the course is to obtain a good understanding of some of the most fundamental mathematical optimization techniques used to solve linear programs and basic combinatorial optimization problems. The students will also practice applying the learned models to problems in engineering.",
                inhalt: "Topics covered in this course include:\n• Linear programming (simplex method, duality theory, shadow prices, ...).\n• Basic combinatorial optimization problems (spanning trees, shortest paths, network flows, ...).\n• Modelling with mathematical optimization: applications of mathematical programming in engineering."
            },
            "Numerische Methoden für CSE": {
                kurzbeschreibung: "The course gives an introduction into fundamental techniques and algorithms of numerical mathematics which play a central role in numerical simulations in science and technology. The course focuses on fundamental ideas and algorithmic aspects of numerical methods. The exercises involve actual implementation of numerical methods in C++.",
                lernziel: "• Knowledge of the fundamental algorithms in numerical mathematics\n• Knowledge of the essential terms in numerical mathematics and the techniques used for the analysis of numerical algorithms\n• Ability to choose the appropriate numerical method for concrete problems\n• Ability to interpret numerical results\n• Ability to implement numerical algorithms afficiently",
                inhalt: "• Computing with Matrices and Vectors\n• Direct Methods for linear systems of equations\n• Least Squares Techniques\n• Data Interpolation and Fitting\n• Iterative Methods for non-linear systems of equations\n• Filtering Algorithms\n• Approximation of Functions\n• Numerical Quadrature"
            },
            "Programming Techniques for Scientific Simulations I": {
                kurzbeschreibung: "This lecture provides an overview of programming techniques for scientific simulations. The focus is on basic and advanced C++ programming techniques and scientific software libraries. Based on an overview over the hardware components of PCs and supercomputer, optimization methods for scientific simulation codes are explained.",
                lernziel: "The goal of the course is that students learn basic and advanced programming techniques and scientific software libraries as used and applied for scientific simulations.",
                inhalt: ""
            },
            "Programmiertechniken für physikalische Simulationen": {
                kurzbeschreibung: "This lecture provides an overview of programming techniques for scientific simulations. The focus is on basic and advanced C++ programming techniques and scientific software libraries. Based on an overview over the hardware components of PCs and supercomputer, optimization methods for scientific simulation codes are explained.",
                lernziel: "The goal of the course is that students learn basic and advanced programming techniques and scientific software libraries as used and applied for scientific simulations.",
                inhalt: ""
            },
            "Systems Programming and Computer Architecture": {
                kurzbeschreibung: "Introduction to systems programming. C and assembly language, floating point arithmetic, basic translation of C into assembler, compiler optimizations, manual optimizations.\n\nHow hardware features like superscalar architecture, exceptions and interrupts, caches, virtual memory, multicore processors, devices, and memory systems function and affect correctness, performance, and optimization.",
                lernziel: "The course objectives are for students to:\n1. Develop a deep understanding of, and intuition about, the execution of all the layers (compiler, runtime, OS, etc.) between programs in high-level languages and the underlying hardware: the impact of compiler decisions, the role of the operating system, the effects of hardware on code performance and scalability, etc.\n2. Be able to write correct, efficient programs on modern hardware, not only in C but high-level languages as well.\n3. Understand Systems Programming as a complement to other disciplines within Computer Science and other forms of software development.\nThis course does not cover how to design or build a processor or computer.",
                inhalt: "1. This course provides an overview of \"computers\" as a platform for the execution of (compiled) computer programs. \n2. This course provides a programmer's view of how computer systems execute programs, store information, and communicate. \n3. The course introduces the major computer architecture structures that have direct influence on the execution of programs (processors with registers, caches, other levels of the memory hierarchy, supervisor/kernel mode, and I/O structures) and covers implementation and representation issues only to the extend that they are necessary to understand the structure and operation of a computer system.\nThe course attempts to expose students to the practical issues that affect performance, portability, security, robustness, and extensibility. \nThis course provides a foundation for subsequent courses on operating systems, networks, compilers and many other courses that require an understanding of the system-level issues. \n\nTopics covered include: \n• machine-level code and its generation by optimizing compilers\n• address translation\n• input and output\n• trap/event handlers\n• performance evaluation and optimization (with a focus on the practical aspects of data collection and analysis)"
            },
            "Software Engineering": {
                kurzbeschreibung: "This course introduces both theoretical and practical aspects of software engineering, all of which are applied in a substantial team project.",
                lernziel: "The course has two main objectives:\n• Obtain an end-to-end (both, theoretical and practical) understanding of the core techniques used for building quality software.\n• Be able to apply these techniques in practice.",
                inhalt: "This course introduces theoretical and applied aspects of software engineering, including: \n• requirements\n• specifications and documentation\n• formal and informal modelling\n• modularity\n• testing and concolic execution.\nThe theoretical foundations provided in the lecture, from understanding requirements over design and implementation to deployment and change requests, will be applied by the students in a mandatory project that spans the whole semester: developing, as a team, a small multiplayer game with graphical user interface and network support.\n\nLectures and project use C++, and we expect knowledge corresponding to lecture 252-0856 Computer Science."
            },
            "Design of Parallel and High-Performance Computing": {
                kurzbeschreibung: "Advanced topics in parallel and high-performance computing.",
                lernziel: "Understand concurrency paradigms and models from a higher perspective and acquire skills for designing, structuring and developing possibly large parallel high-performance software systems. \n\nBecome able to distinguish parallelism in problem space and in machine space. Become familiar with important technical concepts and with concurrency folklore.",
                inhalt: "We will cover all aspects of high-performance computing ranging from architecture through programming up to algorithms. \nWe will start with a discussion of caches and cache coherence in practical computer systems. \nWe will dive into parallel programming concepts such as memory models, locks, and lock-free. \nWe will cover performance modeling and parallel design principles as well as basic parallel algorithms."
            },
            "Design of High Performance Computing": {
                kurzbeschreibung: "Advanced topics in parallel and high-performance computing.",
                lernziel: "Understand concurrency paradigms and models from a higher perspective and acquire skills for designing, structuring and developing possibly large parallel high-performance software systems. \n\nBecome able to distinguish parallelism in problem space and in machine space. Become familiar with important technical concepts and with concurrency folklore.",
                inhalt: "We will cover all aspects of high-performance computing ranging from architecture through programming up to algorithms. \nWe will start with a discussion of caches and cache coherence in practical computer systems. \nWe will dive into parallel programming concepts such as memory models, locks, and lock-free. \nWe will cover performance modeling and parallel design principles as well as basic parallel algorithms."
            },
            "Introduction to Machine Learning": {
                kurzbeschreibung: "The course introduces the foundations of learning and making predictions based on data.",
                lernziel: "The course will introduce the foundations of learning and making predictions from data. We will study basic concepts such as trading goodness of fit and model complexitiy. We will discuss important machine learning algorithms used in practice, and provide hands-on experience in a course project.",
                inhalt: "• Linear regression (overfitting, cross-validation/bootstrap, model selection, regularization, [stochastic] gradient descent)\n• Linear classification: Logistic regression (feature selection, sparsity, multi-class)\n• Kernels and the kernel trick (Properties of kernels; applications to linear and logistic regression); k-nearest neighbor\n• Neural networks (backpropagation, regularization, convolutional neural networks)\n• Unsupervised learning (k-means, PCA, neural network autoencoders)\n• The statistical perspective (regularization as prior; loss as likelihood; learning as MAP inference)\n• Statistical decision theory (decision making based on statistical models and utility functions)\n• Discriminative vs. generative modeling (benefits and challenges in modeling joint vy. conditional distributions)\n• Bayes' classifiers (Naive Bayes, Gaussian Bayes; MLE)\n• Bayesian approaches to unsupervised learning (Gaussian mixtures, EM)"
            },
            "Introduction into Machine Learning": {
                kurzbeschreibung: "The course introduces the foundations of learning and making predictions based on data.",
                lernziel: "The course will introduce the foundations of learning and making predictions from data. We will study basic concepts such as trading goodness of fit and model complexitiy. We will discuss important machine learning algorithms used in practice, and provide hands-on experience in a course project.",
                inhalt: "• Linear regression (overfitting, cross-validation/bootstrap, model selection, regularization, [stochastic] gradient descent)\n• Linear classification: Logistic regression (feature selection, sparsity, multi-class)\n• Kernels and the kernel trick (Properties of kernels; applications to linear and logistic regression); k-nearest neighbor\n• Neural networks (backpropagation, regularization, convolutional neural networks)\n• Unsupervised learning (k-means, PCA, neural network autoencoders)\n• The statistical perspective (regularization as prior; loss as likelihood; learning as MAP inference)\n• Statistical decision theory (decision making based on statistical models and utility functions)\n• Discriminative vs. generative modeling (benefits and challenges in modeling joint vy. conditional distributions)\n• Bayes' classifiers (Naive Bayes, Gaussian Bayes; MLE)\n• Bayesian approaches to unsupervised learning (Gaussian mixtures, EM)"
            },
            "Wissenschaft im Kontext": {
                kurzbeschreibung: "Wissenschaftliches Arbeiten und Methodenkompetenz",
                lernziel: "Erlangung von Methodenkompetenzen für wissenschaftliches Arbeiten im Studium und in der beruflichen Praxis",
                inhalt: "Wissenschaftliche Methoden, Recherche, wissenschaftliches Schreiben"
            },
            "Fallstudien": {
                kurzbeschreibung: "Praktische Anwendung der im Studium erlernten Fähigkeiten in einem Praxisprojekt",
                lernziel: "Fähigkeit zum selbständigen Bearbeiten einer Aufgabenstellung aus der Praxis",
                inhalt: "Projektarbeit in Teams an realen Problemstellungen"
            },
            "Bachelorarbeit": {
                kurzbeschreibung: "Selbständige Bearbeitung eines wissenschaftlichen Themas",
                lernziel: "Erlernen und Anwenden wissenschaftlicher Methoden, selbstständiges Bearbeiten einer wissenschaftlichen Fragestellung",
                inhalt: "Individuell definiertes wissenschaftliches Projekt"
            }
        };

        // Funktion zum Erstellen der Legende mit Prüfungsblöcken
        function erstelleLegende() {
            const legendeElement = document.getElementById("legende");

            // Zuerst die Prüfungsblöcke hinzufügen
            pruefungsbloecke.forEach(block => {
                const div = document.createElement("div");
                div.classList.add("legende-item");
                div.classList.add(block.cssClass);
                
                const titelDiv = document.createElement("div");
                titelDiv.classList.add("legende-item-titel");
                titelDiv.textContent = block.name;
                div.appendChild(titelDiv);
                
                const inhaltDiv = document.createElement("div");
                inhaltDiv.classList.add("legende-item-inhalt");
                
                block.module.forEach(modul => {
                    const modulDiv = document.createElement("div");
                    modulDiv.classList.add("legende-modul");
                    modulDiv.textContent = `${modul.name}, NG: ${modul.ng}`;
                    inhaltDiv.appendChild(modulDiv);
                });
                
                div.appendChild(inhaltDiv);
                legendeElement.appendChild(div);
            });

            // Danach die anderen Kategorien
            kategorien.forEach(kategorie => {
                const div = document.createElement("div");
                div.classList.add("legende-item");
                div.classList.add(kategorie.klasse);
                
                // Container für Name und Info erstellen
                const contentContainer = document.createElement("div");
                contentContainer.style.display = "flex";
                contentContainer.style.flexDirection = "column";
                
                // Name hinzufügen
                const nameSpan = document.createElement("span");
                nameSpan.textContent = kategorie.name;
                nameSpan.style.fontWeight = "bold";
                contentContainer.appendChild(nameSpan);
                
                // Info hinzufügen, falls vorhanden
                if (kategorie.info) {
                    const infoSpan = document.createElement("span");
                    infoSpan.textContent = kategorie.info;
                    infoSpan.style.fontStyle = "italic";
                    infoSpan.style.fontSize = "12px";
                    infoSpan.style.marginTop = "5px";
                    contentContainer.appendChild(infoSpan);
                }
                
                div.appendChild(contentContainer);
                legendeElement.appendChild(div);
            });
        }

        // Funktion zum Erstellen des Tooltip-Inhalts
        function erstelleTooltip(modul) {
            const fragment = document.createDocumentFragment();
            
            // Überprüfen, ob die Modul-Details existieren
            const details = modulDetails[modul.name];
            
            if (details) {
                // Titel hinzufügen
                const title = document.createElement("h3");
                title.textContent = modul.name;
                fragment.appendChild(title);
                
                // KP hinzufügen
                const kp = document.createElement("p");
                kp.innerHTML = `<strong>${modul.kp} Kreditpunkte</strong>`;
                fragment.appendChild(kp);
                
                // Kurzbeschreibung hinzufügen, falls vorhanden
                if (details.kurzbeschreibung) {
                    const kurzbeschreibungTitle = document.createElement("h4");
                    kurzbeschreibungTitle.textContent = "Kurzbeschreibung";
                    fragment.appendChild(kurzbeschreibungTitle);
                    
                    const kurzbeschreibung = document.createElement("p");
                    kurzbeschreibung.innerHTML = details.kurzbeschreibung.replace(/\n/g, '<br>');
                    fragment.appendChild(kurzbeschreibung);
                }
                
                // Lernziel hinzufügen, falls vorhanden
                if (details.lernziel) {
                    const lernzielTitle = document.createElement("h4");
                    lernzielTitle.textContent = "Lernziel";
                    fragment.appendChild(lernzielTitle);
                    
                    const lernziel = document.createElement("p");
                    lernziel.innerHTML = details.lernziel.replace(/\n/g, '<br>');
                    fragment.appendChild(lernziel);
                }
                
                // Inhalt hinzufügen, falls vorhanden
                if (details.inhalt && details.inhalt.trim() !== "") {
                    const inhaltTitle = document.createElement("h4");
                    inhaltTitle.textContent = "Inhalt";
                    fragment.appendChild(inhaltTitle);
                    
                    const inhalt = document.createElement("p");
                    inhalt.innerHTML = details.inhalt.replace(/\n/g, '<br>');
                    fragment.appendChild(inhalt);
                }
            } else {
                // Falls keine Details vorhanden sind
                const noDetails = document.createElement("p");
                noDetails.textContent = "Keine detaillierten Informationen verfügbar.";
                fragment.appendChild(noDetails);
            }
            
            return fragment;
        }

        // Globale Referenz auf das Tooltip-Element
        let tooltipEl;

        // Aktives Modul speichern
        let aktivesModul = null;
        
        // Funktion zum Anzeigen des Tooltips
        function zeigeTooltip(modul, event) {
            // Tooltipelement holen oder erstellen
            if (!tooltipEl) {
                tooltipEl = document.getElementById("tooltip");
            }
            
            // Wenn das Modul bereits aktiv ist, nichts tun
            if (aktivesModul === modul) {
                return;
            }
            
            // Aktuelles Modul als aktiv markieren
            aktivesModul = modul;
            
            // Inhalt leeren und neu befüllen
            tooltipEl.innerHTML = "";
            
            // Tooltipinhalt erstellen
            const tooltipInhalt = erstelleTooltip(modul);
            tooltipEl.appendChild(tooltipInhalt);
            
            // Schließen-Button hinzufügen
            const closeBtn = document.createElement("div");
            closeBtn.classList.add("close-btn");
            closeBtn.textContent = "×";
            closeBtn.addEventListener("click", function(e) {
                e.stopPropagation(); // Verhindert Bubble-up des Events
                verbergeTooltip();
            });
            tooltipEl.appendChild(closeBtn);
            
            // Positionierung nahe Mauszeiger
            tooltipEl.style.top = (event.clientY + 10) + "px";
            tooltipEl.style.left = (event.clientX + 10) + "px";
            
            // Anzeigen
            tooltipEl.style.display = "block";
        }

        // Funktion zum Verbergen des Tooltips
        function verbergeTooltip() {
            if (!tooltipEl) {
                tooltipEl = document.getElementById("tooltip");
            }
            tooltipEl.style.display = "none";
            aktivesModul = null;
        }
        
        // Event-Listener für Klicks außerhalb des Tooltips
        document.addEventListener("click", function(event) {
            if (tooltipEl && event.target !== tooltipEl && !tooltipEl.contains(event.target)) {
                // Prüft, ob das geklickte Element ein Modul ist
                let isModulClick = false;
                let target = event.target;
                
                // Nach oben durch die DOM-Hierarchie gehen, um zu prüfen, ob ein .modul geklickt wurde
                while (target && !isModulClick) {
                    if (target.classList && target.classList.contains("modul")) {
                        isModulClick = true;
                    }
                    target = target.parentElement;
                }
                
                // Wenn das geklickte Element kein Modul ist, Tooltip schließen
                if (!isModulClick) {
                    verbergeTooltip();
                }
            }
        });

        // Hilfsfunktion für Textanpassung
        function fitText(container, selector) {
            const node = container.querySelector(selector);
            if (!node) return;

            // Startgröße festlegen
            let fs = 14; // Startgröße
            node.style.fontSize = fs + "px";

            // Box-Dimensionen erfassen
            const containerWidth = container.clientWidth - 10; // Padding berücksichtigen
            const containerHeight = container.clientHeight / 2 - 10; // Etwa die Hälfte für Titel/KP

            // Solange verkleinern bis Text passt
            while ((node.scrollWidth > containerWidth || node.scrollHeight > containerHeight) && fs > 6) {
                fs--;
                node.style.fontSize = fs + "px";
            }

            // Für sehr kleine Texte zusätzliche Anpassungen
            if (fs <= 8) {
                node.style.lineHeight = "1";
                if (selector === ".modul-titel") {
                    node.style.margin = "1px 0";
                    // In extremen Fällen Abschneiden mit Ellipsis
                    if (fs === 6) {
                        node.style.textOverflow = "ellipsis";
                        node.style.whiteSpace = "nowrap";
                    }
                }
            }
        }

        // Funktion zum Bestimmen der CSS-Klasse basierend auf dem Prüfungsblock
        function getCssClassForPruefungsblock(pruefungsblock) {
            if (!pruefungsblock) return "";
            
            const block = pruefungsbloecke.find(b => b.name === pruefungsblock);
            return block ? block.cssClass : "";
        }

        // Funktion zur Erstellung eines Moduls
        function erstelleModul(modul, container) {
            const div = document.createElement("div");
            div.classList.add("modul");
            
            // Färbung nach Prüfungsblock für Jahr 1 und 2
            if (modul.jahr <= 2 && modul.pruefungsblock) {
                const cssClass = getCssClassForPruefungsblock(modul.pruefungsblock);
                if (cssClass) {
                    div.classList.add(cssClass);
                }
            } else {
                // Für Jahr 3 und andere Module ohne Prüfungsblock
                div.classList.add(modul.kategorie);
            }

            // Standardbreite basierend auf Kategorie und KP
            let breite;
            
            if (modul.name.length > 30) {
                breite = 200; // Für sehr lange Modulnamen
            } else if (modul.name.length > 20) {
                breite = 180; // Für mittellange Modulnamen
            } else {
                breite = 160; // Für kürzere Modulnamen
            }
            
            div.style.width = `${breite}px`;
            
            // Strikt proportionale Höhe basierend auf ECTS-Credits
            // Fester Faktor: 10px pro ECTS-Credit
            const basisHoeheProKP = 10;
            const hoehe = modul.kp * basisHoeheProKP;
            
            div.style.height = `${hoehe}px`;

            // ECTS-Credits oben anzeigen
            const kpDiv = document.createElement("div");
            kpDiv.classList.add("modul-kp");
            kpDiv.textContent = `${modul.kp} KP`;
            div.appendChild(kpDiv);

            // Modultitel
            const titelDiv = document.createElement("div");
            titelDiv.classList.add("modul-titel");
            titelDiv.textContent = modul.name;
            div.appendChild(titelDiv);

            // Info hinzufügen falls vorhanden (aber keine NG)
            if (modul.info) {
                const infoDiv = document.createElement("div");
                infoDiv.style.fontSize = "10px";
                infoDiv.style.fontStyle = "italic";
                infoDiv.style.marginTop = "5px";
                infoDiv.textContent = modul.info;
                div.appendChild(infoDiv);
            }

            // Tooltip-Event hinzufügen (Klick statt Hover)
            div.addEventListener('click', (event) => {
                zeigeTooltip(modul, event);
            });

            container.appendChild(div);
            
            // Textgrößenanpassung
            setTimeout(() => {
                fitText(div, ".modul-kp");
                fitText(div, ".modul-titel");
            }, 0);
            
            return div;
        }

        // Funktion zur Erstellung des Studienplans
        function erstelleStudienplan() {
            const container = document.getElementById("studienplan");
            
            // 1. Jahr mit Semesterunterteilung
            const jahr1 = document.createElement("div");
            jahr1.classList.add("jahr");
            
            const jahr1Titel = document.createElement("div");
            jahr1Titel.classList.add("jahr-titel");
            jahr1Titel.textContent = "1. Jahr";
            jahr1.appendChild(jahr1Titel);
            
            // 1. Semester
            const semester1Titel = document.createElement("div");
            semester1Titel.classList.add("bereich-titel");
            semester1Titel.textContent = "1. Semester";
            jahr1.appendChild(semester1Titel);
            
            const semester1Container = document.createElement("div");
            semester1Container.classList.add("module-container");
            
            // 2. Semester
            const semester2Titel = document.createElement("div");
            semester2Titel.classList.add("bereich-titel");
            semester2Titel.textContent = "2. Semester";
            
            const semester2Container = document.createElement("div");
            semester2Container.classList.add("module-container");
            
            // Module für 1. Jahr einfügen
            const semester1Module = daten.filter(m => m.jahr === 1 && m.semester === 1);
            const semester2Module = daten.filter(m => m.jahr === 1 && m.semester === 2);
            
            semester1Module.forEach(m => erstelleModul(m, semester1Container));
            semester2Module.forEach(m => erstelleModul(m, semester2Container));
            
            jahr1.appendChild(semester1Container);
            jahr1.appendChild(semester2Titel);
            jahr1.appendChild(semester2Container);
            
            container.appendChild(jahr1);
            
            // 2. Jahr ohne Semesterunterteilung
            const jahr2 = document.createElement("div");
            jahr2.classList.add("jahr");
            
            const jahr2Titel = document.createElement("div");
            jahr2Titel.classList.add("jahr-titel");
            jahr2Titel.textContent = "2. Jahr";
            jahr2.appendChild(jahr2Titel);
            
            const jahr2Container = document.createElement("div");
            jahr2Container.classList.add("module-container");
            
            // Module für 2. Jahr einfügen
            const jahr2Module = daten.filter(m => m.jahr === 2);
            jahr2Module.forEach(m => erstelleModul(m, jahr2Container));
            
            jahr2.appendChild(jahr2Container);
            container.appendChild(jahr2);
            
            // 3. Jahr
            const jahr3 = document.createElement("div");
            jahr3.classList.add("jahr");
            
            const jahr3Titel = document.createElement("div");
            jahr3Titel.classList.add("jahr-titel");
            jahr3Titel.textContent = "3. Jahr";
            jahr3.appendChild(jahr3Titel);
            
            // Module nach Bereichen gruppieren
            const modulbereiche = ["Kernfächer", "Vertiefungsgebiet", "Wahlfächer", "Abschluss"];
            
            modulbereiche.forEach(bereich => {
                const bereichModule = daten.filter(m => m.jahr === 3 && m.bereich === bereich);
                
                if (bereichModule.length > 0) {
                    const bereichTitel = document.createElement("div");
                    bereichTitel.classList.add("bereich-titel");
                    bereichTitel.textContent = bereich;
                    jahr3.appendChild(bereichTitel);
                    
                    const bereichContainer = document.createElement("div");
                    bereichContainer.classList.add("module-container");
                    
                    bereichModule.forEach(m => erstelleModul(m, bereichContainer));
                    
                    jahr3.appendChild(bereichContainer);
                }
            });
            
            container.appendChild(jahr3);
        }

        // Initialisierung
        window.onload = function() {
            erstelleLegende();
            erstelleStudienplan();
            
            // Zweiter Durchlauf für Textanpassungen
            setTimeout(() => {
                document.querySelectorAll('.modul').forEach(modul => {
                    fitText(modul, '.modul-kp');
                    fitText(modul, '.modul-titel');
                });
            }, 100);
        };
    </script>
</body>

</html>